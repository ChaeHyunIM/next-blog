---
title: 'Wecode를 마치며...'
image_url: '/images/변수와 호이스팅/변수와 호이스팅.png'
created_at: '2022-04-19'
is_published: false
tags: ['JavaScript']
---

자바스크립트를 접할 때 `var`, `let`, `const`가 무엇인지, 차이점은 무엇인지 모두들 배운 경험이 있을 것이다.
그 경험 속 다들 메모리에 스쳐지나갔던 단어가 있을테니....그 이름은 바로 **호이스팅**!
**호이스팅**이 무엇인지 `Modern JS Deep Dive`와 함께 정확히 알아보자!!✔

# 변수

호이스팅을 배우기 전 **변수**의 개념에 대해 반드시 짚고 넘어갈 필요가 있다. 처음 코딩을 배울 때는 라이트하게 전체적으로 배우는 경우가 많기 때문에 변수 선언은 이렇게 `var`,`let`,`const`와 같은 키워드를 이용하여 하면되는거야~~라고 배웠을 것이다.

```js
var a = 1;
let b = 2;
const c = 3;
```

하지만 변수에 대한 JS의 개념은 꽤나 deep하다.
**변수가 왜 필요한 것인지, JS엔진은 변수를 어떻게 처리하는지, 변수가 처리되는 과정이 무엇인지** 심도있게 다룰 필요가 있다.

## 변수가 필요한 이유

모든 어플리케이션은 데이터를 다룬다. 데이터를 입력(input)받아 처리하고 결과를 출력(output)하는 것이 전부다.
변수는 프로그래밍 언어에서 데이터를 관리하기 위한 핵심 개념이다.
컴퓨터는 인간을 모델로 디자인 되어있기 때문에 그 동작원리도 유사하다.

```
10+20
```

이라는 코드가 주어진다고 해보자.
컴퓨터는 사람과 유사하게 이 코드를 해석하기 위하여 10과 20이라는 literal과 +라는 연산자(operator)의 의미를 알고 있어야한다. 또한 10+20이라는 표현식(expression)도 해석(parsing)할줄 알아야 위 코드를 해석하여 식을 계산할 수 있다.
사람과 컴퓨터의 차이점은 사람은 계산과 기억을 모두 두뇌에서 수행하지만 컴퓨터는 그 역할이 나뉘어져 있다는 것이다.
컴퓨터는 CPU를 통해 연산하고 메모리를 사용해 데이터를 기억한다.

메모리는 데이터를 저장할 수 있는 메모리 셀의 집합체이다.
메모리 셀 하나의 크기는 1byte(8bit)이며, 컴퓨터는 1바byte단위로 데이터를 저장(write)하거나 읽는다(read).

각 셀은 고유의 메모리 주소를 가지는데 데이터는 데이터의 종류와 관계없이 모두 임의의 위치로 이 셀에 2진수의 형태로 (기억)저장된다.![](https://velog.velcdn.com/images/klqwrx7004/post/d52ba37d-9b87-49d8-8b80-d0d5b421184e/image.png)

**JS는 개발자의 직접적인 메모리 제어를 허용하지 않는다.**
즉 셀(메모리 주소)에 저장된 데이터에 직접 접근하는 것이 불가능하다.
동일한 컴퓨터에서 동일한 코드를 실행해도 값이 저장될 메모리 주소는 랜덤하게 항상 변경된다.

**변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름을 말한다.**
따라서 변수는 프로그래밍 언어에서 값을 저장(**할당**)하고 변수에 저장된 값을 읽어들이는(**참조**) 메커니즘으로 **값의 위치를 가리키는 상징적인 이름**이다.
변수를 통해서 개발자는 직접 메모리 주소에 접근할 필요가 없고 안전하게 값에 접근하며 **용이한 재사용성**을 얻을 수 있다.

## 식별자

변수 이름을 식별자(identifier)라고도 한다.
**식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 말한다.**
식별자는 **값이 아니라 메모리 주소를 기억하고 있다.**
식별한다는 것은 메모리 주소를 통해 메모리 공간에 저장된 값에 접근한다고도 말할 수 있다.
즉 식별자(변수 이름)는 메모리 주소에 붙인 이름이다.
식별자는 변수 이름에만 국한되지 않고 함수, 클래스 등 다양하게 사용될 수 있다.
메모리 상에 존재하는 어떤 값을 식별할 수 있는 이름을 모두 식별자라 칭한다.
우리는 **선언(declaration)**을 통해 JS엔진에 식별자의 존재를 알린다.

## 변수 선언

변수 선언은 변수를 **생성**하는 것을 말한다. 변수 선언을 통해 확보된 메모리 공간에 메모리 공간의 주소를 연결(binding)하여 값을 저장한다. 변수 선언에 의해 확보된 메모리 공간은 그 누구도 공간이 해체되기 전까지 접근할 수 없으므로 안전하다.
변수 선언을 다들 잘 알다시피 `var`, `let`, `const` 키워드를 통해 선언할 수 있다.
먼저 var을 통해 선언과정을 살펴보자

```js
var score; //변수 선언(변수 선언문)
```

변수를 선언하면 메모리 주소에 변수 이름을 등록하고 주소에 해당하는 메모리 공간을 확보한다.

> **변수 이름은 어디에 등록되는가?**
> 변수 이름을 비롯한 모든 식별자는 실행 컨텍스트에 등록된다. 실행 컨텍스트는 자바스크립트 엔진이 소스코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역이다. 자바스크립트 엔진은 실행 컨텍스트를 통해 식별자와 스코프를 관리한다.

변수를 선언하고 아직 값을 할당하지 않았다. 변수 선언에 의해 확보된 메모리 공간은 허나 **비어있지 않고** **undefined**이라는 값이 암묵적으로 할당되어 초기화(initialize)된다.

![](https://velog.velcdn.com/images/klqwrx7004/post/46f87ffb-01e7-43ad-a3a3-811b7a4242ca/image.png)

JS엔진은 변수 선언을 다음과 같은 2단계에 걸쳐 수행한다.

- 선언 단계: 변수 이름 등록을 통해 JS엔진에 변수의 존재를 알린다
- 초기화단계: 값을 저장하기 위한 메모리 공간을 확보하고 undefined을 할당해 초기화한다.

## 변수 호이스팅

```js
console.log(score); // undefined
var score; // 변수 선언문
```

위 코드를 보자
JS엔진은 런타임(runtime)에서 **코드를 순차적으로 실행한다.** 이를 동기적 처리라고도 한다.
따라서 score이 선언되지 않은 상태에서 출력을 시도하면 에러가 일어날 것 같지만 undefined값이 출력되고 에러는 일어나지 않는다.
왜 그럴까?

> 다음 코드에 `score` 변수를 선언하였기 때문에 **변수 호이스팅**이 발생하였다.

변수 선언이 소스코드가 한 줄씩 순차적으로 실행되는 시점, 즉 런타임이 아니라 그 이전 단계에서 먼저 실행된 것이다.
**JS엔진은 코드를 실행하기 전 변수 선언을 포함한 모든 선언문을 찾아내어 먼저 실행한다.** 이것을 소스코드의 평가 과정이라고도 한다.
![](https://velog.velcdn.com/images/klqwrx7004/post/3418c755-8843-4d2a-9340-7bf06d463b3d/image.png)

> 즉 변수 선언문은 어디에 위치하는지와는 상관없이 항상 먼저 실행되고 **변수 선언문이 코드의 선두로 끌어올려진 것처럼 동작하는 JS 고유의 특징을 변수 호이스팅이라 한다.**

호이스팅은 변수 뿐만 아니라 모든 식별자의 선언에 대해서 작동된다. 모든 선언문은 런타임 이전 단계(소스코드의 평가과정)에서 실행되기 때문에!!
